Use the undirected network in `edges.csv`.

Return a JSON object with keys:
- `edge_count`: number
- `highest_degree_node`: string
- `average_degree`: number
- `density`: number
- `shortest_path_alice_eve`: number
- `network_graph`: base64 PNG string under 100kB
- `degree_histogram`: base64 PNG string under 100kB

Answer:
1. How many edges are in the network?
2. Which node has the highest degree?
3. What is the average degree of the network?
4. What is the network density?
5. What is the length of the shortest path between Alice and Eve?
6. Draw the network with nodes labelled and edges shown. Encode as base64 PNG.
7. Plot the degree distribution as a bar chart with green bars. Encode as base64 PNG.


USER_PROMPT = f"""
You are generating Python code that solves the given problem in multiple incremental steps.

Rules:
- You can read {folder}/metadata.txt if it exists.And pass its info to you llm call.
- Store any new insights into {folder}/metadata.txt (append).
- After each partial step, raise StepIncompleteError to continue the loop.
- Only store the final answer in {folder}/result.txt.

- External libraries must be listed; built-ins should not be listed.
- If an error occurs, raise StepIncompleteError so the controlling loop can retry or continue.
- Use the provided Gemini API key when additional reasoning or code generation is needed mid-process.

Your process:
1. Read any available metadata from metadata.txt.
2. Execute one logical step toward the solution.
3. Save findings to metadata.txt.
4. Raise StepIncompleteError until the final step is reached.
5. On the last step, store the result in result.txt and set is_correct = true.

This task will be run without human interaction; your code must handle data retrieval, LLM calls, and file operations automatically.
"""

- Always return valid JSON:
  {{
      "code": "<python_code_here>",
      "libraries": ["list", "of", "external_libraries"],
      "is_correct": true_or_false
  }}

for image processing use python and don't use gemini vision model it is not working
